"use strict";function scrollLT(evt){evt.preventDefault();var targetPar=evt.currentTarget.parentElement;if("fav-devices__navi"===targetPar.className)anim(elemToScroll=document.querySelector("."+targetPar.className+" ~ .devices"),"-"+elemToScroll.scrollLeft);else if("fav-scripts__navi"===targetPar.className){var elemToScroll;anim(elemToScroll=document.querySelector("."+targetPar.className+" ~ .scripts"),"-"+elemToScroll.scrollTop)}}function scrollRB(evt){evt.preventDefault();var targetPar=evt.currentTarget.parentElement;if("fav-devices__navi"===targetPar.className)anim(elemToScroll=document.querySelector("."+targetPar.className+" ~ .devices"),(amountMax=elemToScroll.scrollWidth-elemToScroll.clientWidth)-elemToScroll.scrollLeft);else if("fav-scripts__navi"===targetPar.className){var elemToScroll,amountMax=(elemToScroll=document.querySelector("."+targetPar.className+" ~ .scripts")).scrollHeight-elemToScroll.clientHeight;anim(elemToScroll,elemToScroll.scrollTop+amountMax)}}function anim(elem,scroll){if("devices"===elem.className)var startPos=elem.scrollLeft;else if("scripts"===elem.className)startPos=elem.scrollTop;var start=Date.now(),timer=setInterval(function(){var timePassed=Date.now()-start;500<=timePassed?clearInterval(timer):draw(timePassed,500,elem,scroll,startPos)},20)}function draw(time,timeMax,elem,scroll,startPos){var scrollInt=parseInt(scroll);0<=scrollInt&&"devices"===elem.className?elem.scrollLeft=startPos+scrollInt/timeMax*time:scrollInt<0&&"devices"===elem.className&&(elem.scrollLeft=scrollInt/timeMax*time-scrollInt),0<=scrollInt&&"scripts"===elem.className?elem.scrollTop=startPos+scrollInt/timeMax*time:scrollInt<0&&"scripts"===elem.className&&(elem.scrollTop=scrollInt/timeMax*time-scrollInt)}function dummyLoc(){var dummy=document.getElementById("dummy");return dummy.offsetTop+(493-dummy.getBoundingClientRect().bottom)-(759-document.getElementsByClassName("footer")[0].getBoundingClientRect().bottom)+"px"}function dummyDisappear(evt){return evt.stopPropagation(),document.getElementById("dummy").className="devices__dummy_hide",!0}function dummyAppear(){var dummy=document.getElementById("dummy"),dummyTop=dummyLoc();return parseInt(dummyTop)<420&&(dummy.style.top=dummyTop,dummy.className="devices__dummy_show",!0)}function openPopUp(evt){evt.stopPropagation();var bodyEl=document.body;bodyEl.style.overflow="hidden",document.getElementsByClassName("container")[0].className+=" container_anim";var popUpBg=document.createElement("div");popUpBg.className="pop-up__bg",document.body.appendChild(popUpBg);var popUpWrapper=document.createElement("div");popUpWrapper.className="pop-up",document.body.appendChild(popUpWrapper);var devItem=evt.currentTarget,devItemLoc=devItem.getBoundingClientRect(),nDevItem=devItem.cloneNode(!0);nDevItem.style="top: "+devItemLoc.top+"px; left: "+devItemLoc.left+"px;",popUpWrapper.appendChild(nDevItem);var devTypeClass=nDevItem.childNodes[1].className;if(nDevItem.childNodes[3].className="",nDevItem.childNodes[3].childNodes[1].className="sec-txt_s18b dev-name",nDevItem.childNodes[3].childNodes[3].className="dev-time sec-txt","Xiaomi warm floor"!=nDevItem.childNodes[3].childNodes[1].textContent){var devTimeList=document.createElement("ul");devTimeList.className="dev-list";for(var i=1;i<5;i++){var devTimeListItem=document.createElement("li");devTimeListItem.className="dev-list__item sec-txt_s13",devTimeList.appendChild(devTimeListItem)}"item__sun_off"===devTypeClass||"item__sun_on"===devTypeClass?(devTimeList.children[0].textContent="Вручную",devTimeList.children[1].textContent="Дневной свет",devTimeList.children[2].textContent="Вечерний свет",devTimeList.children[3].textContent="Рассвет"):"item__temp_off"!==devTypeClass&&"item__temp_on"!==devTypeClass||(devTimeList.children[0].textContent="Вручную",devTimeList.children[1].textContent="Холодно",devTimeList.children[2].textContent="Тепло",devTimeList.children[3].textContent="Жарко"),nDevItem.appendChild(devTimeList);var slider=document.createElement("div"),sliderImgT=document.createElement("div"),sliderBtn=document.createElement("div"),sliderImgB=document.createElement("div");sliderImgT.className="dev-slider"+devSliderImg,sliderBtn.className="dev-slider__btn",sliderImgB.className="dev-slider"+devSliderImg,slider.appendChild(sliderImgT),slider.appendChild(sliderBtn),slider.appendChild(sliderImgB),nDevItem.appendChild(slider)}else{var circSlider=document.createElement("div");circSlider.className="dev-circ-slider";var circUnused=document.createElement("div");circUnused.className="dev-circ-slider__unused-temp";var circInner=document.createElement("div");circInner.className="dev-circ-slider__inner-circ";var circNum=document.createElement("span");circNum.className="dev-circ-slider__num",circNum.textContent="+23";var circBtn=document.createElement("div");circBtn.className="dev-circ-slider__btn",circInner.appendChild(circNum),circSlider.appendChild(circBtn),circSlider.appendChild(circUnused),circSlider.appendChild(circInner),nDevItem.appendChild(circSlider)}var acceptBtn=document.createElement("button");acceptBtn.className="pop-up__btn sec-txt_s18b",acceptBtn.textContent="Применить",popUpWrapper.appendChild(acceptBtn);var cancelBtn=document.createElement("button");if(cancelBtn.className="pop-up__btn sec-txt_s18b",cancelBtn.textContent="Закрыть",popUpWrapper.appendChild(cancelBtn),cancelBtn.addEventListener("click",function(evt){closePopUpAnim(evt),setTimeout(delPopUp,400)}),bodyEl.clientWidth<=1365){if(nDevItem.className="pop-up__cont","item__temp_off"===devTypeClass||"item__temp_on"===devTypeClass){var devSliderImg="__heat";nDevItem.childNodes[1].className="dev-type__heat"}else if("item__sun_off"===devTypeClass||"item__sun_on"===devTypeClass){devSliderImg="__light";nDevItem.childNodes[1].className="dev-type__light"}"Xiaomi warm floor"!=nDevItem.childNodes[3].childNodes[1].textContent&&("__light"===devSliderImg?slider.className="dev-slider-light_grad dev-slider":"__heat"===devSliderImg&&(slider.className="dev-slider-heat_grad dev-slider"))}else if(1365<bodyEl.clientWidth){if("Xiaomi warm floor"==nDevItem.childNodes[3].childNodes[1].textContent?nDevItem.className="pop-up__cont-circ":nDevItem.className="pop-up__cont","item__temp_off"===devTypeClass||"item__temp_on"===devTypeClass){devSliderImg="__heat";nDevItem.childNodes[1].className+=" dev-type";var numType=document.createElement("span");numType.className="dev-circ-slider__type-num",numType.textContent="+23",nDevItem.appendChild(numType)}else if("item__sun_off"===devTypeClass||"item__sun_on"===devTypeClass){devSliderImg="__light";nDevItem.childNodes[1].className+=" dev-type"}"Xiaomi warm floor"!=nDevItem.childNodes[3].childNodes[1].textContent&&("__light"===devSliderImg?slider.className="dev-slider-light_grad dev-slider_rotate dev-slider":"__heat"===devSliderImg&&(slider.className="dev-slider-heat_grad dev-slider_rotate dev-slider"))}}function closePopUpAnim(evt){evt.stopPropagation(),document.querySelector(".container_anim").className+="_close",document.querySelector(".pop-up__bg").className+="_close";for(var popUpBtns=document.querySelectorAll(".pop-up__btn"),i=0;i<popUpBtns.length;i++)popUpBtns[i].className="pop-up__btn_close sec-txt_s18b";var devName=document.querySelector(".dev-name");if(devName.className+="_close",document.querySelector(".dev-slider"))var popUpSlider=document.querySelector(".dev-slider");else if(document.querySelector(".dev-circ-slider"))popUpSlider=document.querySelector(".dev-circ-slider");if(popUpSlider.className+="_close","Xiaomi warm floor"==devName.textContent&&1365<document.body.clientWidth)var popUpCont=document.querySelector(".pop-up__cont-circ");else popUpCont=document.querySelector(".pop-up__cont");popUpCont.className+="_close"}function delPopUp(){var popUpWrapper=document.querySelector(".pop-up"),popUpBg=document.querySelector(".pop-up__bg_close");document.querySelector(".container").className="container",document.body.style.overflow="scroll",document.body.removeChild(popUpBg),document.body.removeChild(popUpWrapper)}function init(){for(var devs=document.getElementsByClassName("devices__item"),i=0;i<devs.length;i++)devs[i].addEventListener("click",openPopUp);var devList=document.getElementsByClassName("devices")[0];devList.addEventListener("touchstart",dummyDisappear),devList.addEventListener("touchend",function(){setTimeout(dummyAppear,400)});var scrCount=document.querySelectorAll(".fav-scripts > .scripts .scripts__item").length,devCount=document.querySelectorAll(".fav-devices > .devices .devices__item").length;if(9<scrCount){var scrNavi=document.getElementsByClassName("fav-scripts__navi")[0];scrNavi.style.visibility="visible",document.getElementsByClassName("scripts")[0].style="overflow-y: scroll",scrNavi.childNodes[1].addEventListener("click",scrollLT),scrNavi.childNodes[3].addEventListener("click",scrollRB)}if(6<devCount){var devNavi=document.getElementsByClassName("fav-devices__navi")[0];devNavi.style.visibility="visible",document.getElementsByClassName("devices")[1].style="overflow-x: scroll",devNavi.childNodes[1].addEventListener("click",scrollLT),devNavi.childNodes[3].addEventListener("click",scrollRB)}}window.onload=init;